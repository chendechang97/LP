import os
import shutil

def delete_files_with_suffix(directory, suffix):
    """Delete all files in the directory that end with the specified suffix."""
    for filename in os.listdir(directory):
        if filename.endswith(suffix):
            file_path = os.path.join(directory, filename)
            os.remove(file_path)
            print(f"Deleted file: {file_path}")

def copy_redun_files_to_target(source_directory, target_directory, suffix_redun, suffix_target):
    """Copy files with the redun suffix from the source directory to the target directory,
    with the target suffix."""
    for filename in os.listdir(source_directory):
        if filename.endswith(suffix_redun):
            # 构建新文件名
            target_filename = filename.replace(suffix_redun, suffix_target)
            
            # 构建源文件和目标文件的完整路径
            source_file = os.path.join(source_directory, filename)
            target_file = os.path.join(target_directory, target_filename)
            
            # 复制文件
            shutil.copy2(source_file, target_file)
            print(f"Copied file from {source_file} to {target_file}")

def process_files(source_folder, target_folder):
    """Delete _Arch_datatype.arxml files and copy _redun_datatype.arxml files to the target folder."""
    # 删除指定后缀的文件
    delete_files_with_suffix(source_folder, '_Arch_datatype.arxml')
    
    # 复制指定前缀的文件
    copy_redun_files_to_target(source_folder, target_folder, '_redun_datatype.arxml', '_datatype.arxml')

# 指定源文件夹和目标文件夹路径
source_folder = 'path/to/source_folder'
target_folder = 'path/to/target_folder'

# 执行处理
process_files(source_folder, target_folder)
